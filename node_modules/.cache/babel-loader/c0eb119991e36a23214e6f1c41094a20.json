{"remainingRequest":"/Users/vaa/code/ful/node_modules/babel-loader/lib/index.js!/Users/vaa/code/ful/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/vaa/code/ful/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vaa/code/ful/src/components/Checkout.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/vaa/code/ful/src/components/Checkout.vue","mtime":1727886668000},{"path":"/Users/vaa/code/ful/node_modules/cache-loader/dist/cjs.js","mtime":1727895832636},{"path":"/Users/vaa/code/ful/node_modules/babel-loader/lib/index.js","mtime":1727895832920},{"path":"/Users/vaa/code/ful/node_modules/cache-loader/dist/cjs.js","mtime":1727895832636},{"path":"/Users/vaa/code/ful/node_modules/vue-loader/lib/index.js","mtime":1727895832988}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NoZWNrb3V0JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RyaXBlOiBudWxsIC8vIFN0cmlwZSBpbnN0YW5jZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnY2FydEl0ZW1zJywgJ2NhcnRUb3RhbCddKSwKICAgIGNhcnQoKSB7CiAgICAgIHJldHVybiB0aGlzLmNhcnRJdGVtczsKICAgIH0sCiAgICB0b3RhbFByaWNlKCkgewogICAgICByZXR1cm4gdGhpcy5jYXJ0VG90YWw7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc29sZS5sb2coIkxvYWRpbmcgU3RyaXBlIHNjcmlwdCBkeW5hbWljYWxseS4uLiIpOwoKICAgIC8vIER5bmFtaWNhbGx5IGxvYWQgdGhlIFN0cmlwZSBzY3JpcHQgYW5kIGluaXRpYWxpemUgU3RyaXBlIG9ubHkgd2hlbiByZWFkeQogICAgdGhpcy5sb2FkU3RyaXBlU2NyaXB0KCkudGhlbigoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJTdHJpcGUgc2NyaXB0IHN1Y2Nlc3NmdWxseSBsb2FkZWQhIik7CiAgICAgIHRoaXMuc3RyaXBlID0gd2luZG93LlN0cmlwZShwcm9jZXNzLmVudi5WVUVfQVBQX1NUUklQRV9QVUJMSVNIQUJMRV9LRVkpOwogICAgICBpZiAodGhpcy5zdHJpcGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiU3RyaXBlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseSB3aXRoIHRoZSBlbnZpcm9ubWVudCBrZXk6IiwgdGhpcy5zdHJpcGUpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIlN0cmlwZSBpbml0aWFsaXphdGlvbiBmYWlsZWQuIENoZWNrIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZS4iKTsKICAgICAgICBhbGVydCgiVW5hYmxlIHRvIGluaXRpYWxpemUgU3RyaXBlLiBQbGVhc2UgY2hlY2sgeW91ciBjb25maWd1cmF0aW9uLiIpOwogICAgICB9CiAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGxvYWRpbmcgU3RyaXBlIHNjcmlwdDoiLCBlcnJvcik7CiAgICAgIGFsZXJ0KCJVbmFibGUgdG8gbG9hZCBTdHJpcGUuIFBsZWFzZSBjaGVjayB5b3VyIGNvbm5lY3Rpb24gb3IgdHJ5IGFnYWluIGxhdGVyLiIpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkU3RyaXBlU2NyaXB0KCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGlmICh3aW5kb3cuU3RyaXBlKSB7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgICAgc2NyaXB0LnNyYyA9ICdodHRwczovL2pzLnN0cmlwZS5jb20vdjMvJzsKICAgICAgICAgIHNjcmlwdC5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKCk7CiAgICAgICAgICBzY3JpcHQub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoIkZhaWxlZCB0byBsb2FkIFN0cmlwZS5qcyIpKTsKICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUNoZWNrb3V0KCkgewogICAgICBpZiAoIXRoaXMuc3RyaXBlKSB7CiAgICAgICAgYWxlcnQoIlN0cmlwZSBpcyBub3QgcmVhZHkgeWV0LiBQbGVhc2UgdHJ5IGFnYWluIGluIGEgbW9tZW50LiIpOwogICAgICAgIGNvbnNvbGUuZXJyb3IoIlN0cmlwZSBpbnN0YW5jZSBpcyBub3QgaW5pdGlhbGl6ZWQgeWV0LiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5jYXJ0Lmxlbmd0aCA9PT0gMCkgewogICAgICAgIGFsZXJ0KCdZb3VyIGNhcnQgaXMgZW1wdHkhJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKCdJbml0aWF0aW5nIFN0cmlwZSBDaGVja291dCB3aXRoIENhcnQ6JywgdGhpcy5jYXJ0KTsKCiAgICAgIC8vIFJlcGxhY2UgdGhlc2Ugd2l0aCBhY3R1YWwgUHJpY2UgSURzIGZyb20geW91ciBTdHJpcGUgRGFzaGJvYXJkCiAgICAgIGNvbnN0IHByaWNlTWFwcGluZyA9IHsKICAgICAgICAnU2VhZ2F0ZSBEcml2ZSAxIFRCJzogJ3ByaWNlXzFRNVhJVERMcmtGOXJSdU1TRDFyWGVXTCcsCiAgICAgICAgLy8gVXBkYXRlZCBUZXN0IE1vZGUgUHJpY2UgSUQgZm9yIFNlYWdhdGUgRHJpdmUKICAgICAgICAnUmFpbmJvdyBMYW1wJzogJ3ByaWNlX3BsYWNlaG9sZGVyXzEnLAogICAgICAgICdWaWJyYW50IFRhYmxlJzogJ3ByaWNlX3BsYWNlaG9sZGVyXzInLAogICAgICAgICdBcnRpc3RpYyBNdWcnOiAncHJpY2VfcGxhY2Vob2xkZXJfMycKICAgICAgfTsKCiAgICAgIC8vIENyZWF0ZSBsaW5lIGl0ZW1zIHVzaW5nIHRoZSBwcmVkZWZpbmVkIHByaWNlIElEcwogICAgICBjb25zdCBsaW5lSXRlbXMgPSB0aGlzLmNhcnQubWFwKGl0ZW0gPT4gKHsKICAgICAgICBwcmljZTogcHJpY2VNYXBwaW5nW2l0ZW0ubmFtZV0sCiAgICAgICAgcXVhbnRpdHk6IDEKICAgICAgfSkpOwoKICAgICAgLy8gVHJpZ2dlciBTdHJpcGUgY2hlY2tvdXQKICAgICAgdGhpcy5zdHJpcGUucmVkaXJlY3RUb0NoZWNrb3V0KHsKICAgICAgICBsaW5lSXRlbXM6IGxpbmVJdGVtcywKICAgICAgICBtb2RlOiAncGF5bWVudCcsCiAgICAgICAgc3VjY2Vzc1VybDogd2luZG93LmxvY2F0aW9uLm9yaWdpbiArICcvc3VjY2VzcycsCiAgICAgICAgY2FuY2VsVXJsOiB3aW5kb3cubG9jYXRpb24ub3JpZ2luICsgJy9jYW5jZWwnCiAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICBpZiAocmVzdWx0LmVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdTdHJpcGUgQ2hlY2tvdXQgRXJyb3I6JywgcmVzdWx0LmVycm9yLm1lc3NhZ2UpOwogICAgICAgICAgYWxlcnQocmVzdWx0LmVycm9yLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapGetters","name","data","stripe","computed","cart","cartItems","totalPrice","cartTotal","mounted","console","log","loadStripeScript","then","window","Stripe","process","env","VUE_APP_STRIPE_PUBLISHABLE_KEY","error","alert","catch","methods","Promise","resolve","reject","script","document","createElement","src","onload","onerror","Error","head","appendChild","handleCheckout","length","priceMapping","lineItems","map","item","price","quantity","redirectToCheckout","mode","successUrl","location","origin","cancelUrl","result","message"],"sources":["src/components/Checkout.vue"],"sourcesContent":["<template>\n  <div class=\"checkout-container\">\n    <h2>Checkout</h2>\n    <div v-if=\"cart.length > 0\">\n      <h3>Items in your cart:</h3>\n      <ul>\n        <li v-for=\"(item, index) in cart\" :key=\"index\">\n          {{ item.name }} - ${{ item.price }}\n        </li>\n      </ul>\n      <p><strong>Total: ${{ totalPrice }}</strong></p>\n      <button class=\"checkout-button\" @click=\"handleCheckout\">Pay with Stripe</button>\n    </div>\n    <p v-else>Your cart is empty.</p>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\n\nexport default {\n  name: 'Checkout',\n  data() {\n    return {\n      stripe: null, // Stripe instance\n    };\n  },\n  computed: {\n    ...mapGetters(['cartItems', 'cartTotal']),\n    cart() {\n      return this.cartItems;\n    },\n    totalPrice() {\n      return this.cartTotal;\n    },\n  },\n  mounted() {\n    console.log(\"Loading Stripe script dynamically...\");\n\n    // Dynamically load the Stripe script and initialize Stripe only when ready\n    this.loadStripeScript()\n      .then(() => {\n        console.log(\"Stripe script successfully loaded!\");\n        this.stripe = window.Stripe(process.env.VUE_APP_STRIPE_PUBLISHABLE_KEY);\n        if (this.stripe) {\n          console.log(\"Stripe initialized successfully with the environment key:\", this.stripe);\n        } else {\n          console.error(\"Stripe initialization failed. Check the environment variable.\");\n          alert(\"Unable to initialize Stripe. Please check your configuration.\");\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error loading Stripe script:\", error);\n        alert(\"Unable to load Stripe. Please check your connection or try again later.\");\n      });\n  },\n  methods: {\n    loadStripeScript() {\n      return new Promise((resolve, reject) => {\n        if (window.Stripe) {\n          resolve();\n        } else {\n          const script = document.createElement('script');\n          script.src = 'https://js.stripe.com/v3/';\n          script.onload = () => resolve();\n          script.onerror = () => reject(new Error(\"Failed to load Stripe.js\"));\n          document.head.appendChild(script);\n        }\n      });\n    },\n    handleCheckout() {\n      if (!this.stripe) {\n        alert(\"Stripe is not ready yet. Please try again in a moment.\");\n        console.error(\"Stripe instance is not initialized yet.\");\n        return;\n      }\n      if (this.cart.length === 0) {\n        alert('Your cart is empty!');\n        return;\n      }\n\n      console.log('Initiating Stripe Checkout with Cart:', this.cart);\n\n      // Replace these with actual Price IDs from your Stripe Dashboard\n      const priceMapping = {\n        'Seagate Drive 1 TB': 'price_1Q5XITDLrkF9rRuMSD1rXeWL', // Updated Test Mode Price ID for Seagate Drive\n        'Rainbow Lamp': 'price_placeholder_1',\n        'Vibrant Table': 'price_placeholder_2',\n        'Artistic Mug': 'price_placeholder_3'\n      };\n\n      // Create line items using the predefined price IDs\n      const lineItems = this.cart.map((item) => ({\n        price: priceMapping[item.name],\n        quantity: 1,\n      }));\n\n      // Trigger Stripe checkout\n      this.stripe.redirectToCheckout({\n        lineItems: lineItems,\n        mode: 'payment',\n        successUrl: window.location.origin + '/success',\n        cancelUrl: window.location.origin + '/cancel',\n      }).then((result) => {\n        if (result.error) {\n          console.error('Stripe Checkout Error:', result.error.message);\n          alert(result.error.message);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.checkout-container {\n  margin: 50px auto;\n  width: 500px;\n  padding: 20px;\n  background: #f7f9f9;\n  border-radius: 8px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n  text-align: center;\n}\n.checkout-button {\n  padding: 10px 20px;\n  background-color: #6772e5;\n  border: none;\n  color: white;\n  cursor: pointer;\n  border-radius: 5px;\n  transition: background-color 0.3s ease;\n}\n.checkout-button:hover {\n  background-color: #5469d4;\n}\n</style>\n"],"mappings":"AAkBA,SAAAA,UAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAJ,UAAA;IACAK,KAAA;MACA,YAAAC,SAAA;IACA;IACAC,WAAA;MACA,YAAAC,SAAA;IACA;EACA;EACAC,QAAA;IACAC,OAAA,CAAAC,GAAA;;IAEA;IACA,KAAAC,gBAAA,GACAC,IAAA;MACAH,OAAA,CAAAC,GAAA;MACA,KAAAR,MAAA,GAAAW,MAAA,CAAAC,MAAA,CAAAC,OAAA,CAAAC,GAAA,CAAAC,8BAAA;MACA,SAAAf,MAAA;QACAO,OAAA,CAAAC,GAAA,mEAAAR,MAAA;MACA;QACAO,OAAA,CAAAS,KAAA;QACAC,KAAA;MACA;IACA,GACAC,KAAA,CAAAF,KAAA;MACAT,OAAA,CAAAS,KAAA,iCAAAA,KAAA;MACAC,KAAA;IACA;EACA;EACAE,OAAA;IACAV,iBAAA;MACA,WAAAW,OAAA,EAAAC,OAAA,EAAAC,MAAA;QACA,IAAAX,MAAA,CAAAC,MAAA;UACAS,OAAA;QACA;UACA,MAAAE,MAAA,GAAAC,QAAA,CAAAC,aAAA;UACAF,MAAA,CAAAG,GAAA;UACAH,MAAA,CAAAI,MAAA,SAAAN,OAAA;UACAE,MAAA,CAAAK,OAAA,SAAAN,MAAA,KAAAO,KAAA;UACAL,QAAA,CAAAM,IAAA,CAAAC,WAAA,CAAAR,MAAA;QACA;MACA;IACA;IACAS,eAAA;MACA,UAAAhC,MAAA;QACAiB,KAAA;QACAV,OAAA,CAAAS,KAAA;QACA;MACA;MACA,SAAAd,IAAA,CAAA+B,MAAA;QACAhB,KAAA;QACA;MACA;MAEAV,OAAA,CAAAC,GAAA,+CAAAN,IAAA;;MAEA;MACA,MAAAgC,YAAA;QACA;QAAA;QACA;QACA;QACA;MACA;;MAEA;MACA,MAAAC,SAAA,QAAAjC,IAAA,CAAAkC,GAAA,CAAAC,IAAA;QACAC,KAAA,EAAAJ,YAAA,CAAAG,IAAA,CAAAvC,IAAA;QACAyC,QAAA;MACA;;MAEA;MACA,KAAAvC,MAAA,CAAAwC,kBAAA;QACAL,SAAA,EAAAA,SAAA;QACAM,IAAA;QACAC,UAAA,EAAA/B,MAAA,CAAAgC,QAAA,CAAAC,MAAA;QACAC,SAAA,EAAAlC,MAAA,CAAAgC,QAAA,CAAAC,MAAA;MACA,GAAAlC,IAAA,CAAAoC,MAAA;QACA,IAAAA,MAAA,CAAA9B,KAAA;UACAT,OAAA,CAAAS,KAAA,2BAAA8B,MAAA,CAAA9B,KAAA,CAAA+B,OAAA;UACA9B,KAAA,CAAA6B,MAAA,CAAA9B,KAAA,CAAA+B,OAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}